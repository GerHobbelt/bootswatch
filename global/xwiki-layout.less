// This file contains values and classes specific to XWiki (http://www.xwiki.org)
// XWiki-Layout: defines how main containers are arranged
// ----------------------------------------------------------------------------

// Local Variables ============================================================

@padding-grid-vertical:          @grid-gutter-width / 2;
@padding-grid-horizontal:        @grid-gutter-width / 2;

// Local Mixins ===============================================================

.padding-grid { // Used to align to grid
  padding: @padding-grid-vertical @padding-grid-horizontal;
}

.padding-container { // Used for layout containers
  padding: @padding-grid-vertical @grid-gutter-width;
}

// Responsive VIEW Layout =====================================================

#contentcontainer {
  &.content {
    #leftPanels {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-3);
      &:extend(.col-lg-3);
    }
    #contentcolumn {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-6);
      &:extend(.col-md-offset-3);
      &:extend(.col-lg-6);
      &:extend(.col-lg-offset-3);
    }
    #rightPanels {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-3);
      &:extend(.col-md-offset-9);
      &:extend(.col-lg-3);
      &:extend(.col-lg-offset-9);
    }
  }

  &.contenthideleft {
    #contentcolumn {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-9);
      &:extend(.col-lg-9);
    }
    #rightPanels {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-3);
      &:extend(.col-md-offset-9);
      &:extend(.col-lg-3);
      &:extend(.col-lg-offset-9);
    }
  }

  &.contenthideright {
    #leftPanels {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-3);
      &:extend(.col-lg-3);
    }
    #contentcolumn {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-9);
      &:extend(.col-md-offset-3);
      &:extend(.col-lg-9);
      &:extend(.col-lg-offset-3);
    }
  }

  &.contenthidelefthideright {
    #contentcolumn {
      &:extend(.col-xs-12);
      &:extend(.col-sm-12);
      &:extend(.col-md-12);
      &:extend(.col-lg-12);
    }
  }
}

/* Small devices (up to 991px) */
@media (max-width: (@screen-md - 1px)) { 
  #contentcontainer {
    #leftPanels, #rightPanels {
      padding-top: @line-height-computed;
    }
  }
}

/* Medium devices (desktops, 992px and up) */
@media (min-width: @screen-md) {
  #contentcontainer {
    position: relative;
    &.content {
      #leftPanels, #rightPanels {
        position: absolute;
      }
    }
    &.contenthideleft {
      #rightPanels {
        position: absolute;
      }
    }
    &.contenthideright {
      #leftPanels {
        position: absolute;
      }
    }
  }
}

// Responsive EDIT Layout =====================================================

#edit {
  .leftsidecolumns {
    &:extend(.col-xs-12);
    &:extend(.col-sm-12);
    &:extend(.col-md-9);
    &:extend(.col-lg-9);
  }
  #editPanels {
    &:extend(.col-xs-12);
    &:extend(.col-sm-12);
    &:extend(.col-md-3);
    &:extend(.col-md-offset-9);
    &:extend(.col-lg-3);
    &:extend(.col-lg-offset-9);
  }
}

/* Small devices (up to 991px) */
@media (max-width: (@screen-md - 1px)) { 
  #edit {
    #editPanels {
      padding-top: @line-height-computed;
    }
  }
}

/* Medium devices (desktops, 992px and up) */
@media (min-width: @screen-md) {
  #edit {
    position: relative;
    #editPanels {
      position: absolute;
    }
  }
}

// Responsive GENERIC Layout ==================================================

#footerglobal {
  &:extend(.col-xs-12);
  &:extend(.col-sm-12);
  &:extend(.col-md-12);
  &:extend(.col-lg-12);

  .hideleft & {
    &:extend(.col-xs-12);
    &:extend(.col-sm-12);
    &:extend(.col-md-9);
    &:extend(.col-lg-9);
  }

  .hideright & {
    &:extend(.col-xs-12);
    &:extend(.col-sm-12);
    &:extend(.col-md-9);
    &:extend(.col-md-offset-3);
    &:extend(.col-lg-9);
    &:extend(.col-lg-offset-3);
  }
}

// Paddings ===================================================================

#contentcontainer, #edit {
  padding: @padding-grid-vertical 0; // The horizontal values are given by #contentcolumn, #leftPanels and #rightPanels
  margin: 0 -@padding-grid-horizontal;
}

#footerglobal {
  padding: 0 @padding-grid-horizontal @padding-grid-vertical; // Align with #contentcontainer grid columns
}

.xwikitabbar {
  padding-left: @padding-grid-horizontal; // Leave a left space before displaying the tabs
}

#mainContentArea, #mainEditArea,
#xdocFooter,
#docextrapanes {
  .padding-container;
}

.xwikipanelcontents {
  .padding-grid;
}

#globallinks { // Align it with the panels
  &:extend(.col-md-3);
  &:extend(.col-lg-3);
  .padding-grid;
  .globalsearch {
    padding-left: 2 * @padding-base-horizontal;
  }
  #headerlanguages {
    padding-top: @padding-base-vertical;
  }
}

#mainContentArea {
  #hierarchy {
    padding-top: @padding-grid-vertical;
  }

  #document-info {
    padding-bottom: 2 * @padding-grid-vertical;
  }
}

// Responsive Applications ====================================================

/* Small devices (up to tablets, 768px) */
@media (max-width: @screen-sm) { 
  .main { // Adding more specificity in order to have priority
    .dashboard { // Dashboard
      .container-columns .column { 
        width: 100%;
      }
    }

    #user-page-content, // User Profile
    #admin-page-content { // Administration
      float: left;
      margin-left: auto;
    }

    .search { // Search 
      &-form, &-facets {
        width: 100%;
        max-width: 100%;
      }
      &-results-left {
        float: left;
        margin: 0;
      }
    }
  }
}